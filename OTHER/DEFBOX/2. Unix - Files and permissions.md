# Create a file and set specific permissions

### Task
Create a new directory /home/defbox/files.
Inside this directory, create a file called testfile.txt and set its permissions so that the owner has read and write permissions, the group has read-only permissions, and others have no permissions.

### Theory
In Unix, file permissions control who can read, write, or execute a file. Permissions are represented as r (read), w (write), x (execute) for three groups: owner, group, and others (e.g., rwxr-xr--).

Using chmod to Change Permissions:
Syntax:

chmod [options] mode file
Examples:

Numeric (octal) mode:
chmod 755 file  # Owner: rwx, Group: r-x, Others: r-x
Symbolic mode:

```bash
chmod u+x file  # Add execute for the owner
chmod g-w file  # Remove write for the group
chmod o=r file  # Set read-only for others
```

Common octal values:

```bash
777 – Full access (rwxrwxrwx)
644 – Read/write for owner, read-only for others (rw-r--r--)
600 – Owner-only read/write (rw-------)
```

### Solve

```bash
root@bash-exersizes:~# mkdir /home/defbox/files
root@bash-exersizes:~# cd /home/defbox/files
root@bash-exersizes:/home/defbox/files# touch testfile.txt
root@bash-exersizes:/home/defbox/files# chmod 640 testfile.txt
root@bash-exersizes:/home/defbox/files# ls -la testfile.txt 
-rw-r----- 1 root root 0 Aug 14 12:00 testfile.txt
```

### TIP 

Note that you can set file permissions with chmod using numbers (like 640) or symbols (like o-rwx).

# Modify ownership and permissions

### Task
Change the ownership of testfile.txt (created in the previous task) so that ownership is set to defbox, and the group ownership is set to students.
Ensure the owner still has read and write access, and that the group has both read and write access.

### Solve

```bash
root@bash-exersizes:/home/defbox/files# ls -la
total 8
drwxr-xr-x 2 root   root   4096 Aug 14 12:00 .
drwxr-x--- 5 defbox defbox 4096 Aug 14 12:00 ..
-rw-r----- 1 root   root      0 Aug 14 12:00 testfile.txt
root@bash-exersizes:/home/defbox/files# chown defbox:students testfile.txt
root@bash-exersizes:/home/defbox/files# ls -la testfile.txt 
-rw-r----- 1 defbox students 0 Aug 14 12:00 testfile.txt
```

### TIP

To change the group ownership of a file, utilize the following syntax: $ chown :group1 file1.txt

# Create a symbolic and hard link

### Task
In the /home/defbox/files/ directory, create two links:

A hard link named hardlink.txt that points to testfile.txt.
A symbolic link named symlink.txt that points to testfile.txt.
 

### Theory
In Unix, symlinks (symbolic links) are special files that point to another file or directory. There are two types:

1. Soft Link (Symbolic Link)
Points to the target file's path.
If the target is deleted, the soft link becomes broken (dangling link).
Can link to directories or files across different filesystems.

Example:

```bash
ln -s target_file link_name
```

2. Hard Link
Points directly to the file's inode (data on disk).
Even if the original file is deleted, the data remains accessible via the hard link.
Cannot link to directories or span across filesystems.

Example:

```bash
ln target_file link_name
```

### Differences

| Feature               | Soft Link                  | Hard Link                  |
|-----------------------|---------------------------|---------------------------|
| **Points to**         | File path                 | Inode                     |
| **Cross-filesystem**  | Yes                       | No                        |
| **Works with dirs**   | Yes                       | No                        |
| **If target deleted** | Broken (dangling)         | Still works               |
| **Command**           | `ln -s target link_name`  | `ln target link_name`     |

### Solve

```bash
root@bash-exersizes:/home/defbox/files# ln testfile.txt hardlink.txt 
root@bash-exersizes:/home/defbox/files# ln -s testfile.txt symlink.txt
root@bash-exersizes:/home/defbox/files# ls -la
total 8
drwxr-xr-x 2 root   root     4096 Aug 14 12:14 .
drwxr-x--- 5 defbox defbox   4096 Aug 14 12:00 ..
-rw-rw---- 2 defbox students    0 Aug 14 12:00 hardlink.txt
lrwxrwxrwx 1 root   root       12 Aug 14 12:14 symlink.txt -> testfile.txt
-rw-rw---- 2 defbox students    0 Aug 14 12:00 testfile.txt
root@bash-exersizes:/home/defbox/files# 
```

### Tip

Hard links are direct references to the file's data, while soft links are shortcuts that point to the file's path.

# Modify file capabilities

### Task
The developer team wants to run a Python web server using the command python3 -m http.server 80.
However, the security team does not allow services like web servers to run as root to minimize security risks.
Running services as root can be dangerous because if the service is compromised, an attacker could gain full control of the system.
Your task is to change the capabilities of the executable file so that the developer team can run the web server without needing root permissions.

### Theory
In Linux, capabilities provide a finer-grained control over root privileges by allowing specific privileged operations to be granted to processes without giving full root access. This improves security by limiting potential damage from compromised applications.

### Key Features of Capabilities:
Capabilities split root privileges into distinct units (e.g., file operations, networking, etc.).
They can be assigned to executables or processes.
Help implement the principle of least privilege.
### Common Capabilities:
cap_net_bind_service - Allows binding to ports below 1024.
cap_net_admin – Manage network configurations.
cap_sys_time – Modify system time.
cap_chown – Change file ownership.
cap_setuid – Change user ID.

View Capabilities:
```bash
getcap /path/to/executable
```

Set Capabilities:

```bash
setcap cap_net_bind_service+ep /path/to/program
(e = effective, p = permitted)
```

Remove Capabilities:

```bash
setcap -r /path/to/program
```

Displays the capabilities of the current process:

```bash
cat /proc/$$/status | grep Cap
```

### Solve

```bash
root@bash-exersizes:~# which python3
/usr/bin/python3
root@bash-exersizes:~# getcap /usr/bin/python3
root@bash-exersizes:~# setcap cap_net_bind_service=+ep /usr/bin/python3
Failed to set capabilities on file `/usr/bin/python3' (Invalid argument)
The value of the capability argument is not permitted for a file. Or the file is not a regular (non-symlink) file
root@bash-exersizes:~# realpath /usr/bin/python3
/usr/bin/python3.10
root@bash-exersizes:~# setcap cap_net_bind_service=+ep /usr/bin/python3.10
root@bash-exersizes:~# getcap /usr/bin/python3.10
/usr/bin/python3.10 cap_net_bind_service=ep
root@bash-exersizes:~# 
```

### TIP

You can add multiple capabilities at once using the setcap command by separating them with commas. # setcap 'cap_net_bind_service=+ep,cap_sys_time=+ep' /path/to/executable









